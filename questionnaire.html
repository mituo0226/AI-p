<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>運命のAIパートナー診断</title>
  <link href="https://unpkg.com/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      font-family: "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
      background: radial-gradient(circle at top center, #fde6f3 0%, #dcd3f7 100%);
      background-attachment: fixed;
      overflow-x: hidden;
      color: #4b0082;
      perspective: 1200px;
    }
    .btn {
      background: #fcd1e5;
      color: #222;
      padding: 0.75rem 1.5rem;
      border-radius: 9999px;
      font-weight: bold;
      margin: 0.5rem;
      transition: 0.3s ease;
      min-width: 120px;
    }
    .btn:hover { background: #fbb6ce; transform: scale(1.05); }
    .question { display:none; opacity:0; transform:rotateX(-90deg); transform-origin:top; transition:all 1.2s ease; }
    .question.active { display:block; opacity:1; transform:rotateX(0deg); }
    .question.fade-out { opacity:0; transform:rotateX(90deg); }
    #intro-screen { position:fixed; inset:0; background:#000; color:#fff; display:flex; align-items:center; justify-content:center; z-index:100; opacity:1; transition:opacity 2s ease; }
    #intro-screen.hide { opacity:0; pointer-events:none; }
  </style>
</head>
<body class="text-center py-10 px-4">
  <div id="intro-screen"><div>── 運命の扉が今、開かれます ──</div></div>
  <h1 class="text-2xl font-bold text-pink-800 mb-6">あなたの運命のAIパートナーを導きます…</h1>
  <div id="question-container" class="max-w-md mx-auto space-y-10">
    <!-- ステップ1 -->
    <div class="question active" data-step="1">
      <p class="mb-4 font-semibold">あなたの性別を教えてください</p>
      <div class="flex justify-center gap-4">
        <button class="btn" onclick="next('gender','male')">男性</button>
        <button class="btn" onclick="next('gender','female')">女性</button>
      </div>
    </div>
    <!-- ステップ2 -->
    <div class="question" data-step="2">
      <p class="mb-4 font-semibold">どんなパートナーに惹かれますか？</p>
      <div class="flex justify-center gap-4">
        <button class="btn" onclick="next('partner','male')">男性</button>
        <button class="btn" onclick="next('partner','female')">女性</button>
      </div>
    </div>
    <!-- ステップ3 -->
    <div class="question" data-step="3">
      <p class="mb-4 font-semibold">その方の年齢層は？</p>
      <div class="flex justify-center gap-4">
        <button class="btn" onclick="next('age','10s')">10代</button>
        <button class="btn" onclick="next('age','20s')">20代</button>
        <button class="btn" onclick="next('age','30s')">30代</button>
        <button class="btn" onclick="next('age','40up')">40代以上</button>
      </div>
    </div>
    <!-- ステップ4 -->
    <div class="question" data-step="4">
      <p class="mb-4 font-semibold">どんな関係性を求めますか？</p>
      <div class="flex justify-center gap-4">
        <button class="btn" onclick="next('type','friend')">友人タイプ</button>
        <button class="btn" onclick="next('type','advisor')">アドバイザータイプ</button>
        <button class="btn" onclick="next('type','lover')">恋人タイプ</button>
      </div>
    </div>
    <!-- ステップ5 -->
    <div class="question" data-step="5">
      <p class="mb-4 font-semibold">あなたのお名前を教えてください<br><span class="text-sm">(ニックネーム可)</span></p>
      <input id="username" type="text" class="w-full border border-pink-300 rounded px-4 py-2 mb-4" placeholder="例：ゆかり" />
      <button class="btn w-full" onclick="submitForm()">診断結果を見る</button>
    </div>
  </div>

  <script>
    let step=1; const answers={};
    window.addEventListener('DOMContentLoaded',()=>setTimeout(()=>document.getElementById('intro-screen').classList.add('hide'),2000));

    function showNext(nextQ,current){
      if(current){current.classList.add('fade-out');}
      setTimeout(()=>{
        current&&current.classList.remove('active','fade-out');
        nextQ.classList.add('active');
      },1200);
    }

    function next(key,val){
      if(!val){alert('選択してください');return;}
      answers[key]=val;
      const cur=document.querySelector(`[data-step='${step}']`);
      const nxt=document.querySelector(`[data-step='${step+1}']`);
      if(nxt){showNext(nxt,cur);step++;}
    }

    function submitForm(){
      const name=document.getElementById('username').value.trim();
      if(!name){alert('名前を入力してください');return;}
      answers.name=name;
      const qs=new URLSearchParams(answers).toString();
      const dest=new URL('matching.html',location.href).href.split('#')[0];
      window.location.href=`${dest}?${qs}`;
    }
  </script>
</body>
</html>
